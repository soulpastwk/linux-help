---
layout: default
title: "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª—É–∂–±–∞–º–∏ —Å systemd / systemctl"
permalink: /19_systemctl-guide/
---

# üîß –ü–æ–ª–Ω—ã–π –≥–∞–π–¥ –ø–æ `systemctl` –∏ unit-—Ñ–∞–π–ª–∞–º (systemd)

[![Platform](https://img.shields.io/badge/platform-Linux-lightgrey?style=flat-square&logo=linux)]()
[![Category](https://img.shields.io/badge/category-System%20Administration-blue?style=flat-square)]()
[![Tools](https://img.shields.io/badge/tools-systemd%20|%20systemctl-yellow?style=flat-square)]()

---

## üìë –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–ß—Ç–æ —Ç–∞–∫–æ–µ systemd / systemctl](#what-is-systemd)
- [–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã systemctl](#basic-commands)
- [–ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è unit-—Ñ–∞–π–ª—ã –∏ –∏—Ö –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã](#unit-locations)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ unit-—Ñ–∞–π–ª–∞ (service) ‚Äî —Ä–∞–∑–±–∏—Ä–∞–µ–º —Å–µ–∫—Ü–∏–∏](#unit-structure)
- [–°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ .service ‚Äî –ø–æ—à–∞–≥–æ–≤–æ](#creating-service)
- [–®–∞–±–ª–æ–Ω–Ω—ã–µ unit-—Ñ–∞–π–ª—ã (instance units) ‚Äî `@`-—é–Ω–∏—Ç—ã](#template-units)
- [Drop-in, override –∏ `systemctl edit`](#dropin-override)
- [Mask / Unmask ‚Äî –∑–∞—á–µ–º –º–∞—Å–∫–∏—Ä–æ–≤–∞—Ç—å —Å–ª—É–∂–±—ã](#masking)
- [–¢–∞–π–º–µ—Ä—ã (`.timer`) –∏ socket-–∞–∫—Ç–∏–≤–∞—Ü–∏—è (`.socket`)](#timers-sockets)
- [–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Å–ª—É–∂–±—ã: start/stop/restart/reload –∏ –Ω—é–∞–Ω—Å—ã](#lifecycle)
- [–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ —Å–±–æ—è—Ö](#restart-options)
- [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π unit-–æ–≤](#security)
- [–û—Ç–ª–∞–¥–∫–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (journalctl, systemctl status)](#debugging)
- [–ü–æ–ª–µ–∑–Ω—ã–µ –ø—Ä–∏—ë–º—ã –∏ —á–µ–∫–ª–∏—Å—Ç –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω-—Å–ª—É–∂–±](#tips)
- [–ü—Ä–∏–º–µ—Ä—ã: –Ω–µ—Å–∫–æ–ª—å–∫–æ –≥–æ—Ç–æ–≤—ã—Ö unit-—Ñ–∞–π–ª–æ–≤](#examples)
- [–°—Å—ã–ª–∫–∏ / —Ä–µ—Å—É—Ä—Å—ã (–∫–æ—Ä–æ—Ç–∫–æ)](#links)

---

<a id="what-is-systemd"></a>
## –ß—Ç–æ —Ç–∞–∫–æ–µ systemd / systemctl

`systemd` ‚Äî —ç—Ç–æ init-—Å–∏—Å—Ç–µ–º–∞ –∏ –º–µ–Ω–µ–¥–∂–µ—Ä —Å–ª—É–∂–±, –∫–æ—Ç–æ—Ä–∞—è —É–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–æ–º —Å–∏—Å—Ç–µ–º—ã, —Å–ª—É–∂–±, —Å–æ–∫–µ—Ç–æ–≤, —Ç–∞–π–º–µ—Ä–æ–≤ –∏ —Ç.–¥. `systemctl` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å `systemd` (–∑–∞–ø—É—Å–∫/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞/–≤–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–ª–∞–¥–∫–∞ —é–Ω–∏—Ç–æ–≤).

`systemd` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç *unit*-—Ñ–∞–π–ª—ã (—é–Ω–∏—Ç—ã) —Ä–∞–∑–Ω–æ–≥–æ —Ç–∏–ø–∞: `.service`, `.socket`, `.timer`, `.target`, `.mount`, `.path` –∏ –¥—Ä—É–≥–∏–µ.

---

<a id="basic-commands"></a>
## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã `systemctl`

–ö—Ä–∞—Ç–∫–∏–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ ‚Äî —Å–∞–º–æ–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–µ:

- `systemctl start <unit>` ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç—å —é–Ω–∏—Ç —Å—Ä–∞–∑—É.
- `systemctl stop <unit>` ‚Äî –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —é–Ω–∏—Ç.
- `systemctl restart <unit>` ‚Äî –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å (stop ‚Üí start).
- `systemctl reload <unit>` ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–ª—É–∂–±–µ —Å–∏–≥–Ω–∞–ª –¥–ª—è –ø–µ—Ä–µ—á–∏—Ç—ã–≤–∞–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç).
- `systemctl enable <unit>` ‚Äî –≤–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ (–ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–∏—Å—Ç–µ–º—ã —Å–æ–∑–¥–∞—ë—Ç symlink).
- `systemctl disable <unit>` ‚Äî –æ—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫.
- `systemctl enable --now <unit>` ‚Äî –≤–∫–ª—é—á–∏—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ–π—á–∞—Å.
- `systemctl is-enabled <unit>` ‚Äî –≤–µ—Ä–Ω—É—Ç—å `enabled/disabled/static/masked`.
- `systemctl is-active <unit>` ‚Äî –≤–µ—Ä–Ω—É—Ç—å `active/inactive/failed`.
- `systemctl status <unit>` ‚Äî —Å—Ç–∞—Ç—É—Å + –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏.
- `systemctl list-units --type=service` ‚Äî —Å–ø–∏—Å–æ–∫ —Ç–µ–∫—É—â–∏—Ö —é–Ω–∏—Ç–æ–≤ (–∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö/–∞–∫—Ç–∏–≤–Ω—ã—Ö).
- `systemctl list-unit-files` ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö unit-—Ñ–∞–π–ª–æ–≤ –∏ –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π (enabled/disabled/...).
- `systemctl daemon-reload` ‚Äî –ø–µ—Ä–µ—á–∏—Ç–∞—Ç—å unit-—Ñ–∞–π–ª—ã –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞ –¥–∏—Å–∫–µ.
- `systemctl daemon-reexec` ‚Äî –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∞–º systemd (—Ä–µ–¥–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è).
- `systemctl mask <unit>` ‚Äî –∑–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞—Ç—å (—Å–¥–µ–ª–∞—Ç—å –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã–º –∑–∞–ø—É—Å–∫).
- `systemctl unmask <unit>` ‚Äî —Å–Ω—è—Ç—å –º–∞—Å–∫—É.
- `systemctl reset-failed` ‚Äî —Å–±—Ä–æ—Å–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ failed (–ø–æ –æ–¥–Ω–æ–º—É –∏–ª–∏ –≤—Å–µ–º).
- `systemctl cat <unit>` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —é–Ω–∏—Ç–∞ —Å drop-in'–∞–º–∏.
- `systemctl edit <unit>` ‚Äî –æ—Ç–∫—Ä—ã—Ç—å drop-in –¥–ª—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è (–±–µ–∑ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ–∞–π–ª–∞).
- `systemctl link <path-to-unit>` ‚Äî –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —é–Ω–∏—Ç –∏–∑ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–≥–æ –ø—É—Ç–∏.
- `systemctl kill <unit> --kill-who=main --signal=SIGTERM` ‚Äî –ø–æ—Å–ª–∞—Ç—å —Å–∏–≥–Ω–∞–ª –ø—Ä–æ—Ü–µ—Å—Å–∞–º —é–Ω–∏—Ç–∞.

---

<a id="unit-locations"></a>
## –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è unit-—Ñ–∞–π–ª—ã –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–≤–∞–∂–Ω–æ)

–¢–∏–ø–∏—á–Ω—ã–µ –ø—É—Ç–∏ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑ ‚Äî —á–µ–º –≤—ã—à–µ, —Ç–µ–º –≤–∞–∂–Ω–µ–µ):

1. `/etc/systemd/system/` ‚Äî –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞: –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ overrides. (–≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
2. `/run/systemd/system/` ‚Äî runtime-—é–Ω–∏—Ç—ã, –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–±–æ—Ç—ã.
3. `/lib/systemd/system/` –∏–ª–∏ `/usr/lib/systemd/system/` ‚Äî –ø–æ—Å—Ç–∞–≤—â–∏–∫ –ø–∞–∫–µ—Ç–∞ (–ø–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–æ–º). (–Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

–¢–∞–∫–∂–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —é–Ω–∏—Ç—ã:
- `~/.config/systemd/user/` ‚Äî —é–Ω–∏—Ç—ã –¥–ª—è `systemd --user`.
- `systemctl --user` ‚Äî —É–ø—Ä–∞–≤–ª—è–µ—Ç —é–Ω–∏—Ç–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–í–∞–∂–Ω–æ:** –ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–æ–≤ –≤ `/lib/systemd/system/` –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è ‚Äî –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–∞–∫–µ—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–æ–≥—É—Ç –±—ã—Ç—å –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω—ã. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± ‚Äî –ø–æ–º–µ—Å—Ç–∏—Ç—å override –≤ `/etc/systemd/system/<unit>.d/` –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `systemctl edit`.

---

<a id="unit-structure"></a>
## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ unit-—Ñ–∞–π–ª–∞ (–Ω–∞ –ø—Ä–∏–º–µ—Ä–µ `.service`)

Unit-—Ñ–∞–π–ª ‚Äî –æ–±—ã—á–Ω—ã–π INI-—Ñ–∞–π–ª —Å —Å–µ–∫—Ü–∏—è–º–∏:

```ini
[Unit]
Description=My background service
Documentation=man:myservice(8)
After=network.target
Requires=network.target
Wants=postgresql.service

[Service]
Type=simple
User=svcuser
Group=svcgroup
WorkingDirectory=/opt/myapp
Environment=ENV=prod
EnvironmentFile=/etc/default/myapp
ExecStart=/usr/bin/myapp --config /etc/myapp/config.yml
ExecStartPre=/usr/bin/myapp-prep
ExecStop=/bin/kill -TERM $MAINPID
Restart=on-failure
RestartSec=5
LimitNOFILE=65536
PrivateTmp=true
ProtectSystem=full

[Install]
WantedBy=multi-user.target
````

–ö–ª—é—á–µ–≤—ã–µ —Å–µ–∫—Ü–∏–∏ –∏ –æ–ø—Ü–∏–∏:

* `[Unit]`

  * `Description=` ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ.
  * `Documentation=` ‚Äî —Å—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é.
  * `After=` / `Before=` ‚Äî –ø–æ—Ä—è–¥–æ–∫ —Å—Ç–∞—Ä—Ç–∞ (–ª–æ–≥–∏—á–µ—Å–∫–∏–π, –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏).
  * `Requires=` ‚Äî –∂—ë—Å—Ç–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: –µ—Å–ª–∏ Required –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è ‚Äî –∏ —ç—Ç–æ—Ç unit –Ω–µ –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω.
  * `Wants=` ‚Äî –º—è–≥–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–∞).
  * `Condition...` ‚Äî —É—Å–ª–æ–≤–∏—è –∑–∞–ø—É—Å–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä `ConditionPathExists=`).

* `[Service]`

  * `Type=` ‚Äî `simple` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é), `forking`, `oneshot`, `notify`, `dbus`.
  * `ExecStart=` ‚Äî –∫–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞.
  * `ExecStartPre=` / `ExecStartPost=` ‚Äî –∫–æ–º–∞–Ω–¥—ã –¥–æ/–ø–æ—Å–ª–µ —Å—Ç–∞—Ä—Ç–∞.
  * `ExecReload=` ‚Äî –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è reload.
  * `ExecStop=` ‚Äî –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏.
  * `Restart=` ‚Äî `no`, `on-success`, `on-failure`, `always`, `on-abnormal`, `on-abort`.
  * `RestartSec=` ‚Äî –ø–∞—É–∑–∞ –ø–µ—Ä–µ–¥ —Ä–µ—Å—Ç–∞—Ä—Ç–æ–º.
  * `User=` / `Group=` ‚Äî –ø–æ–¥ –∫–∞–∫–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∑–∞–ø—É—Å–∫–∞—Ç—å.
  * `Environment=` / `EnvironmentFile=` ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.
  * –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è/–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: `PrivateTmp=`, `ProtectSystem=`, `ProtectHome=`, `NoNewPrivileges=`, `CapabilityBoundingSet=`, `ReadOnlyDirectories=`, –∏ —Ç.–¥.

* `[Install]`

  * `WantedBy=` ‚Äî –≤ –∫–∞–∫–æ–π —Ç–∞—Ä–≥–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å symlink –ø—Ä–∏ enable (–æ–±—ã—á–Ω–æ `multi-user.target`).
  * `Alias=` ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞.

---

<a id="creating-service"></a>

## –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ `.service` ‚Äî —à–∞–≥–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–°–æ–∑–¥–∞—ë–º unit** –≤ `/etc/systemd/system/`:

   ```bash
   sudo tee /etc/systemd/system/myapp.service > /dev/null <<'EOF'
   [Unit]
   Description=MyApp background service
   After=network.target

   [Service]
   Type=simple
   User=myapp
   Group=myapp
   WorkingDirectory=/opt/myapp
   ExecStart=/usr/bin/myapp --config /etc/myapp/config.yml
   Restart=on-failure
   RestartSec=5
   LimitNOFILE=65536
   PrivateTmp=true

   [Install]
   WantedBy=multi-user.target
   EOF
   ```

2. **–ü–µ—Ä–µ—á–∏—Ç–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é systemd:**

   ```bash
   sudo systemctl daemon-reload
   ```

3. **–í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å:**

   ```bash
   sudo systemctl enable --now myapp.service
   ```

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∏ –ª–æ–≥–∏:**

   ```bash
   sudo systemctl status myapp.service
   sudo journalctl -u myapp.service -b --no-pager
   ```

**–°–æ–≤–µ—Ç—ã:**

* –ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ —Ä–∞–±–æ—á–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∏ –∏ –ª–æ–≥–∏ –≤ `/root` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
* –î–ª—è –¥–µ–º–æ–Ω–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ñ–æ—Ä–∫–∞—é—Ç –ø—Ä–æ—Ü–µ—Å—Å, —Å—Ç–∞–≤—å—Ç–µ `Type=forking`. –î–ª—è –ø—Ä–æ–≥—Ä–∞–º–º, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Ñ–æ—Ä–∫–∞—é—Ç ‚Äî `Type=simple`.
* –î–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–æ–±—â–∞—é—Ç systemd –æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `Type=notify` –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫—É sd_notify.

---

<a id="template-units"></a>

## –®–∞–±–ª–æ–Ω–Ω—ã–µ unit-—Ñ–∞–π–ª—ã (instance units) ‚Äî `@`-—é–Ω–∏—Ç—ã

–®–∞–±–ª–æ–Ω–Ω—ã–π unit –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –æ–¥–Ω–æ–π —Å–ª—É–∂–±—ã —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏: `myservice@instance.service`.

**–ü—Ä–∏–º–µ—Ä `/etc/systemd/system/web@.service`:**

```ini
[Unit]
Description=Web instance %i
After=network.target

[Service]
Type=simple
ExecStart=/usr/bin/web --name %i --config /etc/web/%i.conf

[Install]
WantedBy=multi-user.target
```

–ó–∞–ø—É—Å–∫ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞:

```bash
sudo systemctl start web@front.service
sudo systemctl enable --now web@front.service
```

–í —à–∞–±–ª–æ–Ω–µ `%i` ‚Äî ¬´instance name¬ª (—á–∞—Å—Ç—å –ø–æ—Å–ª–µ `@`), `%f` ‚Äî —Å escape, `%n` ‚Äî –ø–æ–ª–Ω–æ–µ –∏–º—è —é–Ω–∏—Ç–∞.

---

<a id="dropin-override"></a>

## Drop-in –∏ `systemctl edit` ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

–í–º–µ—Å—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –ø–∞–∫–µ—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ drop-in –∏–ª–∏ `systemctl edit`:

* `systemctl edit myapp.service` ‚Äî –æ—Ç–∫—Ä–æ–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –≤ `$EDITOR` –∏ —Å–æ–∑–¥–∞—Å—Ç drop-in –≤ `/etc/systemd/system/myapp.service.d/override.conf` –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è.
* –í—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä:

```ini
[Service]
Environment=NEW_VAR=1
Restart=always
```

* –ß—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Ç–æ–≥–æ–≤—ã–π —Ñ–∞–π–ª —Å —É—á—ë—Ç–æ–º –≤—Å–µ—Ö drop-in:

  ```bash
  systemctl cat myapp.service
  ```

---

<a id="masking"></a>

## Mask / Unmask ‚Äî –∑–∞—á–µ–º –º–∞—Å–∫–∏—Ä–æ–≤–∞—Ç—å —Å–ª—É–∂–±—ã

`mask` —Å–æ–∑–¥–∞—ë—Ç —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫—É—é —Å—Å—ã–ª–∫—É `‚Ä¶ -> /dev/null`, –ø–æ—Å–ª–µ —á–µ–≥–æ `systemctl start` –∏ –¥—Ä—É–≥–∏–µ –∫–æ–º–∞–Ω–¥—ã –Ω–µ —Å–º–æ–≥—É—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å —é–Ω–∏—Ç (–¥–∞–∂–µ –µ—Å–ª–∏ –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å—é). –≠—Ç–æ –Ω–∞–¥—ë–∂–Ω—ã–π —Å–ø–æ—Å–æ–± **–∑–∞–ø—Ä–µ—Ç–∏—Ç—å** –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞ (–≤—Ä—É—á–Ω—É—é –∏–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).

```bash
sudo systemctl mask foo.service
# –ü—Ä–æ–≤–µ—Ä–∫–∞:
systemctl is-enabled foo.service   # –≤–µ—Ä–Ω—ë—Ç "masked"
# –°–Ω—è—Ç–∏–µ –º–∞—Å–∫–∏:
sudo systemctl unmask foo.service
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**

* –í –ø—Ä–æ–¥–µ, –µ—Å–ª–∏ —Å–ª—É–∂–±–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç –∏ –µ—ë –Ω–µ–ª—å–∑—è –¥–æ–ø—É—Å—Ç–∏—Ç—å –∫ –∑–∞–ø—É—Å–∫—É.
* –ü—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏—è—Ö, —á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å —Å–ª—É—á–∞–π–Ω—ã–π –∑–∞–ø—É—Å–∫.

**–ù–µ –ø—É—Ç–∞—Ç—å —Å `disable`**: `disable` –ª–∏—à—å —É–±–∏—Ä–∞–µ—Ç –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫, `mask` ‚Äî –∑–∞–ø—Ä–µ—â–∞–µ—Ç –≤–æ–æ–±—â–µ.

---

<a id="timers-sockets"></a>

## –¢–∞–π–º–µ—Ä—ã –∏ socket-–∞–∫—Ç–∏–≤–∞—Ü–∏—è

### `.timer` ‚Äî –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ systemd (–∑–∞–º–µ–Ω–∞ cron –¥–ª—è —é–Ω–∏—Ç–æ–≤)

–°–æ–∑–¥–∞—ë—Ç —é–Ω–∏—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑—ã–≤–∞–µ—Ç `.service` –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é –∏–ª–∏ —á–µ—Ä–µ–∑ OnBootSec/OnActiveSec.

**–ü—Ä–∏–º–µ—Ä: `/etc/systemd/system/backup.timer` –∏ `backup.service`**

`backup.timer`:

```ini
[Unit]
Description=Daily backup timer

[Timer]
OnCalendar=daily
Persistent=true

[Install]
WantedBy=timers.target
```

`backup.service` ‚Äî –æ–±—ã—á–Ω—ã–π —Å–µ—Ä–≤–∏—Å, –∏—Å–ø–æ–ª–Ω—è—é—â–∏–π –±—ç–∫–∞–ø.

–ó–∞–ø—É—Å–∫:

```bash
sudo systemctl enable --now backup.timer
systemctl list-timers
```

### `.socket` ‚Äî socket-activated services

systemd —Å–ª—É—à–∞–µ—Ç —Å–æ–∫–µ—Ç –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–ª—É–∂–±—É –ø–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é. –≠—Ç–æ —ç–∫–æ–Ω–æ–º–∏—Ç —Ä–µ—Å—É—Ä—Å—ã –∏ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è on-demand —Å–µ—Ä–≤–∏—Å–æ–≤.

`myapp.socket`:

```ini
[Socket]
ListenStream=12345

[Install]
WantedBy=sockets.target
```

`myapp@.service` ‚Äî –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å `StandardInput=socket` –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω.

---

<a id="lifecycle"></a>

## –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Å–ª—É–∂–±—ã: –Ω—é–∞–Ω—Å—ã

* `start` ‚Äî –∑–∞–ø—É—Å–∫–∞–µ—Ç —é–Ω–∏—Ç.
* `stop` ‚Äî –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç.
* `restart` ‚Äî stop ‚Üí start; –ø–æ–ª–µ–∑–Ω–æ, –∫–æ–≥–¥–∞ –Ω–µ–ª—å–∑—è reload.
* `reload` ‚Äî –ø–æ–ø—Ä–æ—Å–∏—Ç—å —Å–ª—É–∂–±—É –ø–µ—Ä–µ—á–∏—Ç–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (–µ—Å–ª–∏ `ExecReload=` –∑–∞–¥–∞–Ω –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç).
* `try-restart` ‚Äî –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Å–ª—É–∂–±–∞ –∑–∞–ø—É—â–µ–Ω–∞.
* `condrestart` ‚Äî –∫–∞–∫ try-restart.
* `reload-or-restart` ‚Äî reload –µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç, –∏–Ω–∞—á–µ restart.

**–ü—Ä–æ `daemon-reload`**: –ü–æ—Å–ª–µ –ª—é–±–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è unit-—Ñ–∞–π–ª–∞ –∏–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è ‚Äî –≤—ã–ø–æ–ª–Ω–∏—Ç—å `systemctl daemon-reload`. –≠—Ç–æ *–Ω–µ* –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–ª—É–∂–±—ã ‚Äî —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ—á–∏—Ç—ã–≤–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é systemd.

---

<a id="restart-options"></a>

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏

`Restart=` ‚Äî –∫–ª—é—á–µ–≤–æ–π –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏:

* `no` ‚Äî –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å
* `on-success` ‚Äî –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
* `on-failure` ‚Äî –ø—Ä–∏ –Ω–µ-–Ω—É–ª–µ–≤–æ–º –∫–æ–¥–µ, —Å–∏–≥–Ω–∞–ª–µ, —Ç–∞–π–º–∞—É—Ç–µ
* `on-abnormal` ‚Äî –µ—Å–ª–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–∑-–∑–∞ —Å–∏–≥–Ω–∞–ª–∞/–æ—à–∏–±–∫–∏
* `on-abort`
* `always` ‚Äî –≤—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å

–ü–æ–ª–µ–∑–Ω—ã–µ –æ–ø—Ü–∏–∏:

* `RestartSec=` ‚Äî –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–º.
* `StartLimitIntervalSec=` –∏ `StartLimitBurst=` ‚Äî –ª–∏–º–∏—Ç—ã –ø–æ–ø—ã—Ç–æ–∫ –∑–∞–ø—É—Å–∫–∞ (–∑–∞—â–∏—â–∞—é—Ç –æ—Ç —Å–ø–∞–º–∞ —Ä–µ—Å—Ç–∞—Ä—Ç–æ–≤).

–ï—Å–ª–∏ —Å–ª—É–∂–±–∞ ¬´–ø–∞–¥–∞–µ—Ç¬ª —á–∞—Å—Ç–æ, systemd –ø–æ–º–µ—Ç–∏—Ç –µ—ë `failed`; `systemctl reset-failed` —Å–±—Ä–æ—Å–∏—Ç —Ñ–ª–∞–≥.

---

<a id="security"></a>

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏ unit-–æ–≤

Systemd –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–Ω–æ–≥–æ –æ–ø—Ü–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π –∏—Ö –ø–æ –º–µ—Ä–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

* –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å/–≥—Ä—É–ø–ø–∞: `User=`, `Group=`.
* `NoNewPrivileges=true` ‚Äî –∑–∞–ø—Ä–µ—Ç –Ω–∞ –ø–æ–≤—ã—à–µ–Ω–∏–µ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π —á–µ—Ä–µ–∑ execve.
* `PrivateTmp=true` ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π /tmp –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞.
* `ProtectSystem=full|strict` ‚Äî –¥–µ–ª–∞–µ—Ç `/usr` –∏ `/boot` –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è.
* `ProtectHome=true` ‚Äî –¥–µ–ª–∞–µ—Ç `/home`, `/root` –∏ `/run/user` –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è (–∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–º–∏).
* `ReadOnlyDirectories=` / `ReadWriteDirectories=` ‚Äî —Ç–æ–Ω–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞.
* `CapabilityBoundingSet=` ‚Äî –Ω–∞–±–æ—Ä –¥–æ—Å—Ç—É–ø–Ω—ã—Ö Linux-capabilities.
* `RestrictAddressFamilies=` ‚Äî –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–µ–º–µ–π —Å–æ–∫–µ—Ç–æ–≤.
* `SystemCallFilter=` ‚Äî –±–µ–ª—ã–π/—á—ë—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫ syscalls (–ø—Ä–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–µ —è–¥—Ä–∞).
* `SELinuxContext=` ‚Äî –∑–∞–¥–∞–≤–∞—Ç—å SELinux –∫–æ–Ω—Ç–µ–∫—Å—Ç (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è).

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∑–∞–ø—É—Å–∫–∞–π —Å–µ—Ä–≤–∏—Å—ã –æ—Ç –Ω–µ–ø—Ä–∞–≤–∞–≤–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∏—Å–ø–æ–ª—å–∑—É–π `ProtectSystem`, `PrivateTmp` –∏ `NoNewPrivileges` –∫–æ–≥–¥–∞ –≤–æ–∑–º–æ–∂–Ω–æ.

---

<a id="debugging"></a>

## –û—Ç–ª–∞–¥–∫–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

* `systemctl status <unit>` ‚Äî –∫—Ä–∞—Ç–∫–æ —Å—Ç–∞—Ç—É—Å + –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ journal.
* `journalctl -u <unit>` ‚Äî –≤—Å–µ –ª–æ–≥–∏ —é–Ω–∏—Ç–∞.

  * `journalctl -u <unit> -b` ‚Äî —Å —Ç–µ–∫—É—â–µ–π –∑–∞–≥—Ä—É–∑–∫–∏.
  * `journalctl -u <unit> -f` ‚Äî follow, –∫–∞–∫ `tail -f`.
  * `journalctl -u <unit> --since "2025-10-01 10:00"` ‚Äî –ø–æ –≤—Ä–µ–º–µ–Ω–∏.
* `systemctl --failed` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —É–ø–∞–≤—à–∏–µ —é–Ω–∏—Ç—ã.
* `systemctl show <unit>` ‚Äî –≤—ã–≤–æ–¥–∏—Ç —Å–≤–æ–π—Å—Ç–≤–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ key=value (—É–¥–æ–±–Ω–æ –¥–ª—è —Å–∫—Ä–∏–ø—Ç–æ–≤).
* `systemd-analyze blame` –∏ `systemd-analyze critical-chain` ‚Äî —É–∑–Ω–∞—Ç—å, —á—Ç–æ —Ç–æ—Ä–º–æ–∑–∏—Ç –∑–∞–≥—Ä—É–∑–∫—É (–ø–æ–ª–µ–∑–Ω–æ –¥–ª—è `boot` –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π).
* `strace`, `gdb` ‚Äî –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–ª—è —Å–∞–º–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ (–Ω–µ –≤ systemd).

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è**:

* `systemctl show-environment` ‚Äî –¥–ª—è systemd-environment.
* –õ–æ–≥–∏ —á–∞—Å—Ç–æ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—É.

---

<a id="tips"></a>

## –ü–æ–ª–µ–∑–Ω—ã–µ –ø—Ä–∏—ë–º—ã –∏ —á–µ–∫–ª–∏—Å—Ç –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω-—Å–ª—É–∂–±

1. **Drop-in –≤–º–µ—Å—Ç–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞–∫–µ—Ç–∞** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º `systemctl edit`.
2. **Unit –¥–æ–ª–∂–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ SIGTERM/SIGINT** ‚Äî systemd —à–ª—ë—Ç SIGTERM –ø—Ä–∏ stop.
3. **–£–∫–∞–∂–∏—Ç–µ `Restart=on-failure`** –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ `RestartSec=`.
4. **–û–≥—Ä–∞–Ω–∏—á—Ç–µ —Ä–µ—Å—É—Ä—Å—ã**: `LimitNOFILE=`, `LimitNPROC=`, `CPUQuota=` –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.
5. **–õ–æ–≥–∏**: –ø–∏—à–∏—Ç–µ –≤ stdout/stderr ‚Äî systemd capture —á–µ—Ä–µ–∑ journal.
6. **Healthcheck**: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `WatchdogSec=` + `Type=notify` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∑–∞–≤–∏—Å–∞–Ω–∏—è.
7. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ `systemctl daemon-reload` ‚Üí `systemctl start` ‚Üí `journalctl -u`.
8. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ** `Description=` –∏ `Documentation=` –≤ unit-—Ñ–∞–π–ª–µ.
9. **–¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º**: `systemctl start --no-block` –ø—Ä–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Å—Ç–∞—Ä—Ç–∞—Ö, –Ω–æ —á–∞—â–µ ‚Äî –∏–∑–±–µ–≥–∞—Ç—å.
10. **CI/CD**: –ø—Ä–∏ –¥–æ—Å—Ç–∞–≤–∫–µ —é–Ω–∏—Ç–æ–≤ —á–µ—Ä–µ–∑ –ø–∞–∫–µ—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `systemctl preset` –∏–ª–∏ `systemctl enable` –≤ postinst.

---

<a id="examples"></a>

## –ü—Ä–∏–º–µ—Ä—ã unit-—Ñ–∞–π–ª–æ–≤

### 1) –ü—Ä–æ—Å—Ç–∞—è web-—Å–ª—É–∂–±–∞ (`/etc/systemd/system/myweb.service`)

```ini
[Unit]
Description=Simple HTTP server
After=network.target

[Service]
Type=simple
User=www-data
WorkingDirectory=/srv/myweb
ExecStart=/usr/bin/python3 -m http.server 8080
Restart=on-failure
PrivateTmp=true
ProtectSystem=full

[Install]
WantedBy=multi-user.target
```

### 2) –§–æ—Ä–∫–∞—é—â–∏–π—Å—è –¥–µ–º–æ–Ω (`Type=forking`)

```ini
[Unit]
Description=Legacy daemon

[Service]
Type=forking
ExecStart=/usr/sbin/legacy-daemon -D
PIDFile=/var/run/legacy.pid
Restart=on-failure
```

### 3) –¢–∞–π–º–µ—Ä + service (`backup.timer` + `backup.service`)

`backup.timer`:

```ini
[Unit]
Description=Daily backup timer

[Timer]
OnCalendar=*-*-* 03:00:00
Persistent=true

[Install]
WantedBy=timers.target
```

`backup.service` ‚Äî –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç –±—ç–∫–∞–ø–∞.

---

<a id="links"></a>

## –ö–æ—Ä–æ—Ç–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —á—Ç–µ–Ω–∏—è

* `man systemd.unit`, `man systemd.service`, `man systemctl`, `man systemd.exec`

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–≠—Ç–æ—Ç –≥–∞–π–¥ –¥–∞—ë—Ç —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –¥–ª—è:

* –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è unit-—Ñ–∞–π–ª–æ–≤;
* –Ω–∞–¥–µ–∂–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ª—É–∂–±–∞–º–∏ (enable/disable, mask/unmask);
* –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —à–∞–±–ª–æ–Ω–æ–≤, —Ç–∞–π–º–µ—Ä–æ–≤ –∏ socket-–∞–∫—Ç–∏–≤–∞—Ü–∏–∏;
* –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –æ—Ç–ª–∞–¥–∫–∏ —á–µ—Ä–µ–∑ `journalctl`.
