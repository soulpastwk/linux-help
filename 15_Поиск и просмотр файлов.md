---
layout: default
title: "Операции с директориями"
permalink: /15_find_file/
---

# 🔍 Поиск и просмотр файлов в Linux

[![Platform](https://img.shields.io/badge/platform-Linux-lightgrey?style=flat-square\&logo=linux)](https://kernel.org)
![Category](https://img.shields.io/badge/category-File_Search-blue?style=flat-square)
![Level](https://img.shields.io/badge/level-beginner--intermediate-green?style=flat-square)
![Tested on](https://img.shields.io/badge/tested%20on-Red%20OS%207.3%20%7C%208.0%20%7C%20Astra%20SE%201.7.5-orange?style=flat-square)

---

## 🧭 Введение

Linux предоставляет множество мощных инструментов для **поиска**, **фильтрации** и **просмотра** файлов.
Эти команды позволяют быстро находить нужные данные даже в огромных системах с тысячами файлов.

---

## 🗂️ 1. Поиск файлов и каталогов — `find`

Команда `find` — универсальный инструмент для поиска по файловой системе.

### 📘 Примеры базового использования

```bash
find /etc -name "nginx.conf"
find /var/log -type f -name "*.log"
find /home -type d -name "Documents"
```

| Опция          | Значение                           |
| -------------- | ---------------------------------- |
| `-name "имя"`  | поиск по имени (регистрозависимый) |
| `-iname "имя"` | поиск без учёта регистра           |
| `-type f`      | искать только файлы                |
| `-type d`      | искать только каталоги             |
| `-mtime`       | по дате изменения                  |
| `-size`        | по размеру                         |
| `-user`        | по владельцу                       |

### 🔍 Примеры

```bash
# Найти все файлы изменённые за последние сутки
find /var/log -type f -mtime -1

# Найти файлы больше 100 МБ
find /home -type f -size +100M

# Найти и удалить временные файлы
find /tmp -type f -name "*.tmp" -delete
```

> [!TIP]
> Добавь ключ `-ls` для вывода подробной информации о найденных файлах:
>
> ```bash
> find /var/log -type f -name "*.log" -ls
> ```

---

## ⚡ 2. Быстрый поиск по индексам — `locate`

`locate` ищет файлы **по базе данных**, а не в реальном времени, что делает его значительно быстрее `find`.

### 📘 Пример

```bash
locate nginx.conf
locate -i sshd
```

| Команда      | Описание                             |
| ------------ | ------------------------------------ |
| `locate имя` | поиск по базе                        |
| `updatedb`   | обновить базу данных                 |
| `-i`         | игнорировать регистр                 |
| `-c`         | показать количество найденных файлов |

> [!NOTE]
> Если система только установлена, сначала выполни:
>
> ```bash
> sudo updatedb
> ```

---

## 🧮 3. Поиск текста внутри файлов — `grep`

```bash
grep "Listen" /etc/httpd/conf/httpd.conf
grep -r "server" /etc/nginx/
```

| Опция          | Значение                         |
| -------------- | -------------------------------- |
| `-r`           | рекурсивный поиск в подкаталогах |
| `-i`           | игнорировать регистр             |
| `-n`           | показывать номера строк          |
| `--color=auto` | подсветка найденного текста      |

📘 **Примеры:**

```bash
# Найти упоминания "root" в файлах /etc
grep -R --color=auto "root" /etc

# Найти строки с ошибками в логах
grep -i "error" /var/log/syslog
```

> [!TIP]
> Для поиска по бинарным файлам можно использовать `strings | grep`.

---

## 📄 4. Просмотр содержимого файлов — `cat`

```bash
cat /etc/os-release
```

Выводит содержимое файла в стандартный поток вывода.

### 🔹 Полезные опции

| Опция | Описание                                 |
| ----- | ---------------------------------------- |
| `-n`  | пронумеровать строки                     |
| `-b`  | нумеровать только непустые строки        |
| `-A`  | показать все символы (включая невидимые) |

📘 **Примеры:**

```bash
cat -n /etc/passwd
cat -A /etc/hostname
```

> [!TIP]
> `cat` отлично подходит для объединения файлов:
>
> ```bash
> cat part1.txt part2.txt > full.txt
> ```

---

## 📜 5. Пошаговый просмотр больших файлов — `less`

```bash
less /var/log/syslog
```

Удобная утилита для чтения больших файлов постранично.

| Команда внутри `less` | Действие                     |
| --------------------- | ---------------------------- |
| `↑ / ↓`               | перемещение по строкам       |
| `PgUp / PgDn`         | листание страниц             |
| `/текст`              | поиск по тексту              |
| `n / N`               | повтор поиска вперёд / назад |
| `q`                   | выход                        |

📘 **Пример:**

```bash
sudo less /var/log/auth.log
```

> [!TIP]
> Можно комбинировать:
>
> ```bash
> grep "error" /var/log/syslog | less
> ```

---

## 🔚 6. Просмотр конца файла — `tail`

```bash
tail /var/log/syslog
```

Показывает последние строки файла (по умолчанию 10).

| Опция | Описание                                              |
| ----- | ----------------------------------------------------- |
| `-n`  | указать количество строк                              |
| `-f`  | следить за изменениями в реальном времени             |
| `-F`  | то же, но с авто-переподключением при изменении файла |

📘 **Примеры:**

```bash
tail -n 50 /var/log/nginx/access.log
tail -f /var/log/nginx/error.log
```

> [!TIP]
> Очень полезно при отладке:
>
> ```bash
> tail -f /var/log/messages | grep "sshd"
> ```

---

## 🔝 7. Просмотр начала файла — `head`

```bash
head -n 20 /etc/passwd
```

Показывает первые строки файла.

📘 **Пример:**

```bash
head -n 5 /var/log/syslog
```

> [!TIP]
> `head` и `tail` можно комбинировать для извлечения нужного диапазона строк.

---

## 🧠 8. Просмотр метаданных файла — `stat`

```bash
stat /etc/hosts
```

Показывает:

* размер файла;
* время последнего доступа/изменения;
* права доступа;
* владельца и группу.

📘 **Пример:**

```bash
stat /var/log/syslog
```

> [!NOTE]
> Альтернатива: `ls -lh --time-style=long-iso /etc/hosts`

---

## 🧰 9. Поиск файлов по размеру и дате

```bash
# Найти файлы больше 500 МБ
find /home -type f -size +500M

# Найти файлы изменённые за последние 7 дней
find /etc -type f -mtime -7
```

📘 **Комбинированный пример:**

```bash
find /var/log -type f -name "*.log" -mtime -3 -size +10M
```

> [!TIP]
> Можно автоматически сжимать найденные логи:
>
> ```bash
> find /var/log -type f -name "*.log" -mtime +7 -exec gzip {} \;
> ```

---

## ⚙️ 10. Быстрые приёмы и комбинации

### 🔹 Найти и просмотреть сразу:

```bash
find /etc -name "sshd_config" -exec cat {} \;
```

### 🔹 Найти файл и вывести первые строки:

```bash
find /var/log -name "*.log" -exec head -n 3 {} \;
```

### 🔹 Смотреть файл "вживую" при обновлении:

```bash
tail -f /var/log/syslog | grep "systemd"
```

### 🔹 Найти большие файлы и отсортировать по размеру:

```bash
find / -type f -size +100M -exec ls -lh {} \; | sort -k5 -hr | head
```

---

## 🚀 Заключение

Команды `find`, `locate`, `grep`, `cat`, `less`, `head`, `tail` и `stat`
— это набор инструментов, без которых невозможно представить администрирование Linux.

Освоив их, ты сможешь:

* быстро находить нужные файлы;
* анализировать их содержимое;
* мониторить изменения в реальном времени;
* автоматизировать задачи поиска и анализа.

---

> [!TIP]
> Для ускорения работы добавь алиасы в `~/.bashrc`:
>
> ```bash
> alias ff='find . -type f -name'
> alias fgrep='grep -R --color=auto'
> alias logs='cd /var/log && ls -lh'
> ```
>
> Применить:
>
> ```bash
> source ~/.bashrc
> ```
