# ‚öôÔ∏è –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã LVM –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –¥–∏—Å–∫–∞

> –ü—Ä–∏–º–µ–Ω–∏–º–æ –¥–ª—è: **RedOS**, **Astra Linux**, **Ubuntu**, **Debian**
> –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–µ—Ä–≤–µ—Ä–æ–≤ –∏ —Ä–∞–±–æ—á–∏—Ö —Å—Ç–∞–Ω—Ü–∏–π —Å —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º LVM-—Ç–æ–º–æ–º.
> –ë–µ–∑ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö.

---

## üß≠ –í–≤–µ–¥–µ–Ω–∏–µ

–û–¥–Ω–æ –∏–∑ –∫–ª—é—á–µ–≤—ã—Ö –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ LVM (Logical Volume Manager) ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å **–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Ä–∞—Å—à–∏—Ä—è—Ç—å –æ–±—ä—ë–º —Ö—Ä–∞–Ω–∏–ª–∏—â–∞**, –¥–æ–±–∞–≤–ª—è—è –Ω–æ–≤—ã–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ –¥–∏—Å–∫–∏ –±–µ–∑ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö.

–ü—Ä–∏–º–µ—Ä —Å—Ü–µ–Ω–∞—Ä–∏—è:

| –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ  | –û–±—ä—ë–º | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                         |
| ----------- | ----- | ---------------------------------- |
| `/dev/sda1` | 1 –¢–ë  | —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –¥–∏—Å–∫ (—É–∂–µ –≤ LVM)      |
| `/dev/sdb`  | 1 –¢–ë  | –Ω–æ–≤—ã–π –¥–∏—Å–∫, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å |

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –¥–∏—Å–∫–∞ `/dev/sdb` –≤ —Å–∏—Å—Ç–µ–º—É –º—ã —Ö–æ—Ç–∏–º **—É–≤–µ–ª–∏—á–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ä–∞–∑–¥–µ–ª LVM** —Å 1 –¢–ë –¥–æ 2 –¢–ë.

---

## üîç 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∏—Å–∫–∏

```bash
lsblk
```

–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:

```
NAME        MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS
sda           8:0    0 931.5G  0 disk
‚îî‚îÄsda1        8:1    0 931.5G  0 part
  ‚îî‚îÄvg_data-lv_data
sdb           8:16   0 931.5G  0 disk
```

> –í–∏–¥–Ω–æ, —á—Ç–æ `sdb` –ø–æ–∫–∞ –Ω–µ —Ä–∞–∑–º–µ—á–µ–Ω ‚Äî —ç—Ç–æ –Ω–æ–≤—ã–π –¥–∏—Å–∫.

---

## üß± 2. –†–∞–∑–º–µ—á–∞–µ–º –Ω–æ–≤—ã–π –¥–∏—Å–∫ –ø–æ–¥ LVM

–ò—Å–ø–æ–ª—å–∑—É–µ–º `parted`:

```bash
sudo parted /dev/sdb
```

–î–∞–ª–µ–µ –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ:

```
(parted) mklabel gpt                 ‚Üê —Å–æ–∑–¥–∞—ë–º —Ç–∞–±–ª–∏—Ü—É —Ä–∞–∑–¥–µ–ª–æ–≤ GPT
(parted) mkpart primary 0% 100%      ‚Üê –æ–¥–∏–Ω —Ä–∞–∑–¥–µ–ª –Ω–∞ –≤–µ—Å—å –¥–∏—Å–∫
(parted) set 1 lvm on                ‚Üê –ø–æ–º–µ—á–∞–µ–º –∫–∞–∫ LVM-—Ä–∞–∑–¥–µ–ª
(parted) quit
```

–ü—Ä–æ–≤–µ—Ä—è–µ–º:

```bash
lsblk /dev/sdb
```

–û–∂–∏–¥–∞–µ–º:

```
sdb
‚îî‚îÄsdb1
```

---

## üß∞ 3. –°–æ–∑–¥–∞—ë–º Physical Volume (PV)

```bash
sudo pvcreate /dev/sdb1
```

–ü—Ä–æ–≤–µ—Ä—è–µ–º:

```bash
sudo pvs
```

–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:

```
PV         VG       Fmt  Attr PSize   PFree
/dev/sda1  vg_data  lvm2 a--  <1.00t    0
/dev/sdb1           lvm2 ---  <1.00t <1.00t
```

---

## üóÇÔ∏è 4. –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π –¥–∏—Å–∫ –≤ Volume Group (VG)

–î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π —Ç–æ–º –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –≥—Ä—É–ø–ø—É (–≤ –ø—Ä–∏–º–µ—Ä–µ ‚Äî `vg_data`):

```bash
sudo vgextend vg_data /dev/sdb1
```

–ü—Ä–æ–≤–µ—Ä—è–µ–º:

```bash
sudo vgs
```

–†–µ–∑—É–ª—å—Ç–∞—Ç:

```
VG       #PV #LV #SN Attr   VSize  VFree
vg_data    2   1   0 wz--n- <2.00t <1.00t
```

> –¢–µ–ø–µ—Ä—å –≥—Ä—É–ø–ø–∞ —Ç–æ–º–æ–≤ **vg_data** –≤–∫–ª—é—á–∞–µ—Ç **–¥–≤–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –¥–∏—Å–∫–∞** –∏ –∏–º–µ–µ—Ç **1 –¢–ë —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞**.

---

## üì¶ 5. –†–∞—Å—à–∏—Ä—è–µ–º –ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ç–æ–º (LV)

–†–∞—Å—à–∏—Ä–∏–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ç–æ–º (`lv_data`), —á—Ç–æ–±—ã –∑–∞–Ω—è—Ç—å –≤—Å—ë –Ω–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ:

```bash
sudo lvextend -l +100%FREE /dev/vg_data/lv_data
```

–∏–ª–∏ —É–∫–∞–∑–∞–≤ —Ä–∞–∑–º–µ—Ä —è–≤–Ω–æ:

```bash
sudo lvextend -L +1T /dev/vg_data/lv_data
```

–ü—Ä–æ–≤–µ—Ä–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ:

```bash
sudo lvs
```

---

## üóÉÔ∏è 6. –†–∞—Å—à–∏—Ä—è–µ–º —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É

–¢–∏–ø –∫–æ–º–∞–Ω–¥—ã –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –§–°:

### –î–ª—è **ext4**:

```bash
sudo resize2fs /dev/vg_data/lv_data
```

### –î–ª—è **XFS**:

```bash
sudo xfs_growfs /data
```

> üí° –î–ª—è XFS —Ç–æ–º –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **—Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω** –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

---

## ‚úÖ 7. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç

```bash
df -h /data
```

–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:

```
Filesystem                      Size  Used Avail Use% Mounted on
/dev/mapper/vg_data-lv_data     2.0T   50G  1.9T   3% /data
```

–¢–µ–ø–µ—Ä—å —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —É—Å–ø–µ—à–Ω–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∞ –¥–æ **2 –¢–ë**.

---

## üß† –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º

| –î–µ–π—Å—Ç–≤–∏–µ                   | –û–ø–∏—Å–∞–Ω–∏–µ                                     |
| -------------------------- | -------------------------------------------- |
| `pvcreate`                 | –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π —Ç–æ–º –Ω–∞ /dev/sdb1     |
| `vgextend`                 | –î–æ–±–∞–≤–ª–µ–Ω –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –≥—Ä—É–ø–ø—É `vg_data`     |
| `lvextend`                 | –†–∞—Å—à–∏—Ä–µ–Ω –ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ç–æ–º –¥–æ –Ω–æ–≤–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞    |
| `resize2fs` / `xfs_growfs` | –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–≤–µ–ª–∏—á–µ–Ω–∞ –¥–æ –ø–æ–ª–Ω–æ–π —ë–º–∫–æ—Å—Ç–∏ |

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å

* –û–ø–µ—Ä–∞—Ü–∏–∏ **–±–µ–∑–æ–ø–∞—Å–Ω—ã –∏ –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö**, –µ—Å–ª–∏ –≤—Å—ë —Å–¥–µ–ª–∞—Ç—å –ø–æ —à–∞–≥–∞–º.
* –†–∞–±–æ—Ç–∞–µ—Ç **–±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏**.
* **XFS** –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å –Ω–∞ ¬´–∂–∏–≤–æ–º¬ª —Ç–æ–º–µ, **ext4** ‚Äî –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ —Å–∏—Å—Ç–µ–º–Ω—ã–π —Ç–æ–º.
* LVM –Ω–µ —Å–æ–∑–¥–∞—ë—Ç –∑–µ—Ä–∫–∞–ª–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ ‚Äî –µ—Å–ª–∏ –Ω—É–∂–µ–Ω **RAID-—É—Ä–æ–≤–µ–Ω—å**, –∏—Å–ø–æ–ª—å–∑—É–π `lvconvert --type mirror` –∏–ª–∏ `mdadm`.

---

## üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö —Ç–æ–º–æ–≤
sudo pvs

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä—É–ø–ø
sudo vgs

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —Ç–æ–º–æ–≤
sudo lvs

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
sudo vgdisplay
sudo lvdisplay
```

---

## üß© –ö—Ä–∞—Ç–∫–∞—è —Å—Ö–µ–º–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è LVM

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  /dev/sda1   ‚îÇ     ‚îÇ  /dev/sdb1   ‚îÇ
‚îÇ  (PV)        ‚îÇ     ‚îÇ  (PV)        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ                    ‚îÇ
       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚ñº
            Volume Group (VG)
                  ‚îÇ
                  ‚ñº
           Logical Volume (LV)
                  ‚îÇ
                  ‚ñº
         –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ (/data)
```

---

## üßæ –ò—Ç–æ–≥

–¢–µ–ø–µ—Ä—å —Ç—ã –º–æ–∂–µ—à—å:

* –î–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ –¥–∏—Å–∫–∏ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é LVM-–≥—Ä—É–ø–ø—É
* –†–∞—Å—à–∏—Ä—è—Ç—å –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ç–æ–º–∞ –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö
* –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

> üí¨ –°–æ–≤–µ—Ç:
>
> * –î–ª—è —Å–µ—Ä–≤–µ—Ä–æ–≤ —Å –¥–∏–Ω–∞–º–∏—á–Ω—ã–º —Ä–æ—Å—Ç–æ–º –¥–∞–Ω–Ω—ã—Ö LVM ‚Äî **–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä**
> * –î–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å `vgcfgbackup`
> * –ü–µ—Ä–µ–¥ —Å–ª–æ–∂–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ ‚Äî **—Å–Ω–∏–º–∞–π —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏**
