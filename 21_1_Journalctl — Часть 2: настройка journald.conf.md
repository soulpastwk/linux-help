---
layout: default
title: "journalctl ‚Äî –ß–∞—Å—Ç—å 2: Cheatsheet –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ journald.conf"
permalink: /21_1_journalctl-guide/
---

# üßæ `journalctl` ‚Äî –ß–∞—Å—Ç—å 2: Cheatsheet –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è systemd-journald

–í —ç—Ç–æ–º –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–∏ —Å–æ–±—Ä–∞–Ω—ã:
- üìò 20 —Å–∞–º—ã—Ö –ø–æ–ª–µ–∑–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ `journalctl`, —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ;
- ‚öôÔ∏è –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ `/etc/systemd/journald.conf` –¥–ª—è production-—Å–∏—Å—Ç–µ–º.

---

## üìë –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–ß–∞—Å—Ç—å 1 ‚Äî –ë—ã—Å—Ç—Ä—ã–π Cheatsheet (20 –∫–æ–º–∞–Ω–¥)](#cheatsheet)
- [–ß–∞—Å—Ç—å 2 ‚Äî –ù–∞—Å—Ç—Ä–æ–π–∫–∞ journald.conf](#config)
- [–ß–∞—Å—Ç—å 3 ‚Äî –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ journald](#maintenance)
- [–ß–∞—Å—Ç—å 4 ‚Äî –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è production](#prod-tips)

---

<a id="cheatsheet"></a>
## üß≠ –ß–∞—Å—Ç—å 1 ‚Äî –ë—ã—Å—Ç—Ä—ã–π Cheatsheet (20 –∫–æ–º–∞–Ω–¥ `journalctl`)

| ‚Ññ | –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|----------|-----------|
| 1 | `sudo journalctl` | –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏ –≤ –∂—É—Ä–Ω–∞–ª–µ |
| 2 | `sudo journalctl -n 50` | –ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 –∑–∞–ø–∏—Å–µ–π |
| 3 | `sudo journalctl -e` | –ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–æ–Ω–µ—Ü –∂—É—Ä–Ω–∞–ª–∞ |
| 4 | `sudo journalctl -f` | –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ |
| 5 | `sudo journalctl -u nginx.service` | –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å–ª—É–∂–±—ã |
| 6 | `sudo journalctl -b` | –õ–æ–≥–∏ —Ç–µ–∫—É—â–µ–π –∑–∞–≥—Ä—É–∑–∫–∏ |
| 7 | `sudo journalctl -b -1` | –õ–æ–≥–∏ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –∑–∞–≥—Ä—É–∑–∫–∏ |
| 8 | `sudo journalctl --list-boots` | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–≥—Ä—É–∑–æ–∫ (boots) |
| 9 | `sudo journalctl -p err` | –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏ –∏ –≤—ã—à–µ |
| 10 | `sudo journalctl -u nginx -p 3 --since today` | –û—à–∏–±–∫–∏ nginx –∑–∞ —Å–µ–≥–æ–¥–Ω—è |
| 11 | `sudo journalctl --since "2 hours ago"` | –õ–æ–≥–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 2 —á–∞—Å–∞ |
| 12 | `sudo journalctl -k` | –¢–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏—è —è–¥—Ä–∞ (dmesg) |
| 13 | `sudo journalctl -r` | –ü–æ–∫–∞–∑–∞—Ç—å –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ |
| 14 | `sudo journalctl -u ssh -n 100 --no-pager` | –£–¥–æ–±–Ω—ã–π –≤—ã–≤–æ–¥ –±–µ–∑ `less` |
| 15 | `sudo journalctl -u nginx -o cat` | –¢–æ–ª—å–∫–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–π |
| 16 | `sudo journalctl -u nginx --since yesterday -o json-pretty` | –≠–∫—Å–ø–æ—Ä—Ç JSON –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ |
| 17 | `sudo journalctl --disk-usage` | –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å, —Å–∫–æ–ª—å–∫–æ –º–µ—Å—Ç–∞ –∑–∞–Ω–∏–º–∞—é—Ç –ª–æ–≥–∏ |
| 18 | `sudo journalctl --vacuum-size=500M` | –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –∂—É—Ä–Ω–∞–ª—ã –¥–æ 500 –ú–ë |
| 19 | `sudo journalctl --vacuum-time=1month` | –£–¥–∞–ª–∏—Ç—å –∂—É—Ä–Ω–∞–ª—ã —Å—Ç–∞—Ä—à–µ –º–µ—Å—è—Ü–∞ |
| 20 | `sudo journalctl -u nginx -n 100 -f -o short-iso` | –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫ nginx + follow —Å ISO –≤—Ä–µ–º–µ–Ω–µ–º |

üí° **–°–æ–≤–µ—Ç:**  
–î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞:  
- `-f` = follow (–∂–∏–≤–æ–π –ø–æ—Ç–æ–∫),  
- `-u` = unit (—Å–ª—É–∂–±–∞),  
- `-p` = –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç,  
- `--since` / `--until` = –¥–∏–∞–ø–∞–∑–æ–Ω –≤—Ä–µ–º–µ–Ω–∏,  
- `-o` = —Ñ–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `cat` –∏–ª–∏ `json`).

---

<a id="config"></a>
## ‚öôÔ∏è –ß–∞—Å—Ç—å 2 ‚Äî –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `/etc/systemd/journald.conf`

–§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `journald.conf` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç:
- –≥–¥–µ –∏ –∫–∞–∫ —Ö—Ä–∞–Ω—è—Ç—Å—è –∂—É—Ä–Ω–∞–ª—ã,
- –∫–∞–∫–æ–π –æ–±—ä—ë–º –ø–∞–º—è—Ç–∏/–¥–∏—Å–∫–∞ –æ–Ω–∏ –∑–∞–Ω–∏–º–∞—é—Ç,
- –∏ –∫–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤.

–û–±—ã—á–Ω–æ –ø—É—Ç—å:
```

/etc/systemd/journald.conf

````

–ü–æ—Å–ª–µ –ø—Ä–∞–≤–æ–∫ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–ª—É–∂–±—É:
```bash
sudo systemctl restart systemd-journald
````

---

### üîπ –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä                | –û–ø–∏—Å–∞–Ω–∏–µ                                                    | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è                                             |
| ----------------------- | ----------------------------------------------------------- | -------------------------------------------------------- |
| `Storage=`              | –ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—å –ª–æ–≥–∏: `volatile`, `persistent`, `auto`, `none`  | `persistent` ‚Äî —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ª–æ–≥–∏ –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞–º–∏ |
| `SystemMaxUse=`         | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –æ–±—â–∏–π –æ–±—ä—ë–º –ª–æ–≥–æ–≤                              | `1G`‚Äì`5G` –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞                       |
| `SystemKeepFree=`       | –ú–∏–Ω–∏–º—É–º —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞, –∫–æ—Ç–æ—Ä–æ–µ journald –¥–æ–ª–∂–µ–Ω –æ—Å—Ç–∞–≤–ª—è—Ç—å | `500M`                                                   |
| `SystemMaxFileSize=`    | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –∂—É—Ä–Ω–∞–ª–∞                    | `100M`                                                   |
| `RuntimeMaxUse=`        | –õ–∏–º–∏—Ç –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö (RAM) –∂—É—Ä–Ω–∞–ª–æ–≤                          | `200M`                                                   |
| `MaxRetentionSec=`      | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Å—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–æ–≥–æ–≤                            | `1month` (–∏–ª–∏ `2weeks`)                                  |
| `RateLimitIntervalSec=` | –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø–æ–¥—Å—á—ë—Ç–∞ –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø–∏—Å–µ–π           | `30s`                                                    |
| `RateLimitBurst=`       | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª               | `1000`                                                   |
| `Compress=`             | –°–∂–∏–º–∞—Ç—å —Å—Ç–∞—Ä—ã–µ –∂—É—Ä–Ω–∞–ª—ã                                      | `yes`                                                    |
| `Seal=`                 | –ü–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å –∞—Ä—Ö–∏–≤–Ω—ã–µ –∂—É—Ä–Ω–∞–ª—ã –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –ø–æ–¥–¥–µ–ª–∫–∏         | `yes`                                                    |
| `SplitMode=`            | –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∂—É—Ä–Ω–∞–ª–æ–≤: `uid`, `none`                          | `uid` (–ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º)                                 |

---

### üí° –ü—Ä–∏–º–µ—Ä –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ journald.conf (Production)

```ini
[Journal]
Storage=persistent
Compress=yes
Seal=yes
SplitMode=uid

SystemMaxUse=2G
SystemKeepFree=500M
SystemMaxFileSize=200M
RuntimeMaxUse=200M

MaxRetentionSec=1month

RateLimitIntervalSec=30s
RateLimitBurst=1000

ForwardToSyslog=no
ForwardToConsole=no
ForwardToWall=no
```

> ‚ö†Ô∏è –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
>
> ```bash
> sudo systemctl restart systemd-journald
> sudo journalctl --verify
> ```

---

<a id="maintenance"></a>

## üßπ –ß–∞—Å—Ç—å 3 ‚Äî –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –∂—É—Ä–Ω–∞–ª–æ–≤

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –æ–±—ä—ë–º –ª–æ–≥–æ–≤:

```bash
sudo journalctl --disk-usage
```

### –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏ —Å—Ç–∞—Ä—à–µ 2 –Ω–µ–¥–µ–ª—å:

```bash
sudo journalctl --vacuum-time=2weeks
```

### –£–º–µ–Ω—å—à–∏—Ç—å –æ–±—ä—ë–º –ª–æ–≥–æ–≤ –¥–æ 1 –ì–ë:

```bash
sudo journalctl --vacuum-size=1G
```

### –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ä–æ—Ç–∞—Ü–∏—é:

```bash
sudo journalctl --rotate
```

---

<a id="prod-tips"></a>

## üöÄ –ß–∞—Å—Ç—å 4 ‚Äî –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è production-—Å—Ä–µ–¥

* –í—Å–µ–≥–¥–∞ **–≤–∫–ª—é—á–∞–π—Ç–µ persistent storage** (`Storage=persistent`).
* –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ **–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞**, —á—Ç–æ–±—ã –ª–æ–≥–∏ –Ω–µ –∑–∞–ø–æ–ª–Ω–∏–ª–∏ –¥–∏—Å–∫ (`SystemMaxUse`, `SystemKeepFree`).
* –ù–µ –ø–µ—Ä–µ—Å—ã–ª–∞–π—Ç–µ –ª–æ–≥–∏ –≤ syslog, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `journald` –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (`ForwardToSyslog=no`).
* –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `Compress=yes` ‚Äî —ç–∫–æ–Ω–æ–º–∏—Ç –¥–æ 70% –º–µ—Å—Ç–∞.
* –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ `RateLimitBurst` –∏ `RateLimitIntervalSec`, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å "—Ñ–ª—É–¥–∞".
* –í –±–æ–ª—å—à–∏—Ö –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö ‚Äî –ø–µ—Ä–µ—Å—ã–ª–∞–π—Ç–µ –∂—É—Ä–Ω–∞–ª—ã —á–µ—Ä–µ–∑ `systemd-journal-remote` / `journal-gatewayd`.
* –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–π—Ç–µ `journalctl --verify` –∏ `--vacuum-*` –¥–ª—è –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∏.
* –î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –¥–æ–±–∞–≤—å—Ç–µ cron-–∑–∞–¥–∞—á—É –æ—á–∏—Å—Ç–∫–∏ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤:

  ```bash
  0 3 * * 0 root /usr/bin/journalctl --vacuum-time=30days
  ```

---

‚úÖ **–ò—Ç–æ–≥:**

* –§–∞–π–ª `/etc/systemd/journald.conf` ‚Äî –∫–ª—é—á –∫ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ –ª–æ–≥–æ–≤;
* –ö–æ–º–∞–Ω–¥—ã –∏–∑ Cheatsheet –ø–æ–∫—Ä—ã–≤–∞—é—Ç 99% –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö —Å–ª—É—á–∞–µ–≤;
* –°–∏—Å—Ç–µ–º–Ω–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ (`vacuum`, `rotate`, `verify`) –≤–∞–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω–æ.

---
